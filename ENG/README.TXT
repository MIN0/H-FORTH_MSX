－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－
FORTH language for MSX “H-FORTH” Ver 1.4a

　Copyright(c) 1999 A.Hiramatsu (Akio Hiramatsu) 99/05/29
－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－

●Introduction

H-FORTH is a FORTH-based programming language arranged for MSX. This language is a ``language for enthusiasts'' created to create programs closely related to MSX hardware.

The target users are those who have almost mastered BASIC and have some knowledge of machine language. It would be even better if you have experience using C language.

"H-FORTH" is the name of the language specification, and the program that converts the H-FORTH source program into MSX machine language is called the "H-FORTH compiler."

The H-FORTH compiler operates on MSX-DOS and outputs a machine language program (COM file) for MSX-DOS.


●Compiler operating environment

  Model: MSX2, 2+, turboR
  Main RAM: 64K bytes or more
  External storage: at least one floppy disk drive
  DOS: MSX-DOS1 or MSX-DOS2

-DOS1 or MSX-DOS2

●How to use

First, write the source program using a text editor etc. Please prepare your own text editor. There are no restrictions on the name of the source program, but it is recommended that the extension be .4TH.

Next, from the DOS command line

HFORTH <Source program file name>

Compile with . Please specify the file name including the extension. It does not support DOS2 hierarchical directories, so a path cannot be specified. (You can specify the drive name.)

If the compilation is successful, a COM file will be created. The name of the COM file is the file name of the source program with the extension changed to .COM.
(Please note that if you compile a source with a name like COMMAND.4TH, it will fail (^^;)

*Please read all documents (README.DOC, UGUIDE1.DOC, UGUIDE2.DOC, RGUIDE.DOC) carefully before use.


●File contents in this archive

   README.DOC   This is the file.
   HFORTH.COM   H-FORTH compiler.
   HFORTH.MAC   H-FORTH compiler assembler source.
   UGUIDE1.DOC  User's Guide 1 "Introduction".
   UGUIDE2.DOC  User's Guide 2 "Intermediate Edition".
   RGUIDE.DOC   reference guide.

(The contents of UGUIDE1.DOC, UGUIDE2.DOC, and RGUIDE.DOC have not changed from Ver1.4, so the ones from Ver1.4 are attached as they are.)
 
●About copyright etc.

The H-FORTH compiler and accompanying documentation are free software.
Distribution is free, but copyright is not waived.

The H-FORTH compiler and accompanying documentation are copyrighted by me, A. Hiramatsu.(Akio Hiramatsu) owns it. Also, the COM file created by the H-FORTH compiler includes the H-FORTH runtime routine, and I own the copyright to this runtime routine.

When distributing the H-FORTH compiler and accompanying documentation, please note the following points:
Please be sure to observe the following.

・Do not modify the file contents.
・Distribute all files in the archive together.
・The software itself is free of charge and no payment shall be made. If there are costs such as blank discs, shipping fees, communication line usage fees, etc. during distribution, you must not charge more than the actual costs.

The COM file created by the H-FORTH compiler can be made into free software or sold for a fee. However, please be sure to observe the following points.

・Please clearly state that it was created using the H-FORTH compiler.
・Please clearly state that the author of H-FORTH is me, A. Hiramatsu (Akio Hiramatsu).

I, A. Hiramatsu (Akio Hiramatsu), will not be held responsible under any circumstances for any damage caused by using the H-FORTH compiler or the COM files created by the compiler.


●About the compiler source (HFORTH.MAC)

The reason why I have attached the compiler assembler source is to help you understand how the compiler and runtime routines work.

I didn't originally write this with the intention of showing it to anyone, so it may be quite difficult to read. For example, label naming is inconsistent over many years of development.

Still, I think this will be of some help to those who say, ``I don't understand the behavior of the COM file generated by the compiler.What's inside?''

Please note that I generally do not allow modifications to the compiler. The reason I'm attaching the source is not for you to modify it.

What I fear most is that there will be a flood of compilers with different specifications that each person has modified to their own liking, and a situation will arise in which people will say, ``This source will only work with so-and-so's version of the compiler.''

If you really want to modify the compiler or announce a modified version of the compiler to the world, please contact A.Hiramatsu (Akio Hiramatsu) via email.

At the very least, I don't want them to make modifications to the level of ``I added a word to switch screen modes'' or ``I added a word to access PSG.'' If that's the case, there's no need to modify the compiler.


●Revision history

96/04/06 Ver1.0 First edition
96/06/23 Ver1.1 Fixed a bug that occurred when & was used for variable arrays.
           Changed JSR specifications
97/03/04 Ver1.2 CNVFCB bug fix
           & can now be used in DATA( )
           Enhanced optimization
             ・BC register usage rate UP
             ・Use INC/DEC instructions for addition and subtraction of small constants
             ・Avoid unnecessary jump commands in control syntax as much as possible
98/01/28 Ver1.3 Introduced external variables using EXTVAR( )
           Strings can now be used in DATA( ).
           Enhanced optimization
             ・Enhanced access optimization for byte type variables
             ・Extract character strings and constant data strings from the routine
              (Previously they were skipped using the JP command, but now the JP command is no longer necessary)
99/04/01 Ver1.4 Stack access optimization bug fix
           Enhanced optimization of word IF{
99/05/29 Ver1.4a Fixed a bug that occurred when closing the IF{ syntax while leaving the value on the stack.


●Contact information

If you have any opinions, impressions, bug reports, etc. regarding H-FORTH, please contact us below.

・Internet email

hiramatu@ca.mbn.or.jp

In addition, my homepage

http://plaza9.mbn.or.jp/~a_hiramatsu

We will be providing information about H-FORTH, so please take a look.

●Special thanks

Thank you to Mr. Suzumisaki Kimitaka for reporting the bug.
